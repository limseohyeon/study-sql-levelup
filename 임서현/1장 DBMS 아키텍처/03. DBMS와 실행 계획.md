# 1. DBMS 실행 계획

`쿼리 평가 엔진`은 입력받은 SQL 구문을 읽고 데이터 접근 절차를 결정한다. 쿼리 평가 엔진은 `파서`, `옵티마이저`와 같은 여러 개의 서브 모듈로 구성된다.

![image.png](attachment:27733f78-3df5-47ed-8939-bbdf824a7d2a:image.png)

## 1.1 파서

사용자로부터 입력받은 SQL 구문이 올바른지 분석한다. 또한, SQL 구문을 정형적인 형식으로 변환해준다.

## 1.2 옵티마이저

옵티마이저는 인덱스 유무, 데이터 분산/평향 정도, DBMS 내부 매개변수 등의 조건을 고려해 **많은 실행 계획을 작성**한다. 이후 작성한 **실행 계획의 비용을 연산**하고 가장 **낮은 비용은 가진 실행 계획을 선택**한다.

## 1.3 카탈로그 매니저

`카탈로그`란 DBMS의 중요한 내부 정보를(테이블, 인덱스 등의 통계 정보) 모아 놓은 테이블로 옵티마이저가 실행 계획을 세울 때 참고할 카탈로그를 제공하는 것이 카탈로그 매니저이다.

## 1.4 플랜 평가

옵티마이저가 작성한 여러개의 실행 계획 중 최적의 실행 결과를 선택하는 것이 플랜 평가이다.

### 옵티마이저에게 플랜 선택을 맡기는 경우 발생하는 문제점

플랜 선택을 옵티마이저에게 맡기는 경우 **최적의 플랜이 선택되지 않는 경우**도 많다. 

대표적인 예로는 통계 정보가 부족한 경우가 있는데, 기본적으로 DBMS에서 자동 갱신을 지원하지만 대량 데이터 배치 후 성능이 느려지거나 개발 환경에서 직접 테스트할 때 실제 데이터와 통계 정보간 차이가 발생하기 때문이 원인이다.  **즉, 테이블의 데이터가 많이 바뀌면 카탈로그의 통계 정보도 함께 갱신**해야 한다.

**DBMS 통계 정보 갱신 명령어**

![image.png](attachment:9e150e45-b71e-49b4-86bd-014869580e09:image.png)